!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("window")):"function"==typeof define&&define.amd?define(["window"],t):"object"==typeof exports?exports.NiceSelect=t(require("window")):e.NiceSelect=t(e.window)}(this,(function(e){return(()=>{"use strict";var t={378:t=>{t.exports=e}},i={};function o(e){var n=i[e];if(void 0!==n)return n.exports;var s=i[e]={exports:{}};return t[e](s,s.exports,o),s.exports}o.d=(e,t)=>{for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{o.r(n),o.d(n,{bind:()=>p});var e=o(378);function t(e){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!1),e.dispatchEvent(t)}function i(e){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),e.dispatchEvent(t)}function s(e,t){return e.getAttribute(t)}function r(e,t){return!!e&&e.classList.contains(t)}function d(e,t){if(e)return e.classList.add(t)}function l(e,t){if(e)return e.classList.remove(t)}var a={data:null,searchable:!1};function c(e,t){this.el=e,this.config=Object.assign({},a,t||{}),this.data=this.config.data,this.selectedOptions=[],this.placeholder=s(this.el,"placeholder")||this.config.placeholder||"Select an option",this.dropdown=null,this.multiple=s(this.el,"multiple"),this.disabled=s(this.el,"disabled"),this.create()}function p(e,t){return new c(e,t)}c.prototype.create=function(){this.el.style.display="none",this.data?this.processData(this.data):this.extractData(),this.renderDropdown(),this.bindEvent()},c.prototype.processData=function(e){var t=[];e.forEach((function(e){t.push({data:e,attributes:{selected:!1,disabled:!1}})})),this.options=t},c.prototype.extractData=function(){var e=this.el.querySelectorAll("option"),t=[],i=[],o=[];e.forEach((function(e){var o={text:e.innerText,value:e.value},n={selected:null!=e.getAttribute("selected"),disabled:null!=e.getAttribute("disabled")};t.push(o),i.push({data:o,attributes:n})})),this.data=t,this.options=i,this.options.forEach((function(e){e.attributes.selected&&o.push(e)})),this.selectedOptions=o},c.prototype.renderDropdown=function(){var e=["select",s(this.el,"class")||"",this.disabled?"disabled":"",this.multiple?"has-multiple":""],t='<div class="'.concat(e.join(" "),'" tabindex="').concat(this.disabled?null:0,'">\n  <span class="').concat(this.multiple?"multiple-options":"current",'"></span>\n  <div class="select-dropdown">\n  ').concat(this.config.searchable?'<div class="select-search-box">\n<input type="text" class="select-search" placeholder="Search..."/>\n</div>':"",'\n  <ul class="list"></ul>\n  </div></div>\n');this.el.insertAdjacentHTML("afterend",t),this.dropdown=this.el.nextElementSibling,this._renderSelectedItems(),this._renderItems()},c.prototype._renderSelectedItems=function(){if(this.multiple){var e="";this.selectedOptions.forEach((function(t){e+='<span class="current">'.concat(t.data.text,"</span>")})),e=""==e?this.placeholder:e,this.dropdown.querySelector(".multiple-options").innerHTML=e}else{var t=this.selectedOptions.length>0?this.selectedOptions[0].data.text:this.placeholder;this.dropdown.querySelector(".current").innerHTML=t}},c.prototype._renderItems=function(){var e=this,t=this.dropdown.querySelector("ul");this.options.forEach((function(i){t.appendChild(e._renderItem(i))}))},c.prototype._renderItem=function(e){var t,i=document.createElement("li");i.setAttribute("data-value",e.data.value);var o=["option",e.attributes.selected?"selected":null,e.attributes.disabled?"disabled":null];return(t=i.classList).add.apply(t,o),i.innerHTML=e.data.text,i.addEventListener("click",this._onItemClicked.bind(this,e)),e.element=i,i},c.prototype.update=function(){if(this.extractData(),this.dropdown){var e=r(this.dropdown,"open");this.dropdown.parentNode.removeChild(this.dropdown),this.create(),e&&t(this.dropdown)}},c.prototype.disable=function(){this.disabled||(this.disabled=!0,d(this.dropdown,"disabled"))},c.prototype.enable=function(){this.disabled&&(this.disabled=!1,l(this.dropdown,"disabled"))},c.prototype.clear=function(){this.selectedOptions=[],this._renderSelectedItems(),this.updateSelectValue(),i(this.el)},c.prototype.destroy=function(){this.dropdown&&(this.dropdown.parentNode.removeChild(this.dropdown),this.el.style.display="")},c.prototype.bindEvent=function(){this.dropdown.addEventListener("click",this._onClicked.bind(this)),this.dropdown.addEventListener("keydown",this._onKeyPressed.bind(this)),e.addEventListener("click",this._onClickedOutside.bind(this)),this.config.searchable&&this._bindSearchEvent()},c.prototype._bindSearchEvent=function(){var e=this.dropdown.querySelector(".select-search");e&&e.addEventListener("click",(function(e){return e.stopPropagation(),!1})),e.addEventListener("input",this._onSearchChanged.bind(this))},c.prototype._onClicked=function(e){if(this.dropdown.classList.toggle("open"),this.dropdown.classList.contains("open")){var t=this.dropdown.querySelector(".select-search");t&&(t.value="",t.focus());var i=this.dropdown.querySelector(".focus");l(i,"focus"),d(i=this.dropdown.querySelector(".selected"),"focus"),this.dropdown.querySelectorAll("ul li").forEach((function(e){e.style.display=""}))}else this.dropdown.focus()},c.prototype._onItemClicked=function(e,t){var i=t.target;r(i,"disabled")||(this.multiple?r(i,"selected")||(d(i,"selected"),this.selectedOptions.push(e)):(this.selectedOptions.forEach((function(e){l(e.element,"selected")})),d(i,"selected"),this.selectedOptions=[e]),this._renderSelectedItems(),this.updateSelectValue())},c.prototype.updateSelectValue=function(){this.multiple?this.selectedOptions.each((function(e){var t=this.el.querySelector('option[value="'+e.data.value+'"]');t&&t.setAttribute("selected",!0)})):this.selectedOptions.length>0&&(this.el.value=this.selectedOptions[0].data.value),i(this.el)},c.prototype._onClickedOutside=function(e){this.dropdown.contains(e.target)||this.dropdown.classList.remove("open")},c.prototype._onKeyPressed=function(e){var i=this.dropdown.querySelector(".focus"),o=this.dropdown.classList.contains("open");if(32==e.keyCode||13==e.keyCode)t(o?i:this.dropdown);else if(40==e.keyCode){if(o){var n=this._findNext(i);n&&(l(this.dropdown.querySelector(".focus"),"focus"),d(n,"focus"))}else t(this.dropdown);e.preventDefault()}else if(38==e.keyCode){if(o){var s=this._findPrev(i);s&&(l(this.dropdown.querySelector(".focus"),"focus"),d(s,"focus"))}else t(this.dropdown);e.preventDefault()}else 27==e.keyCode&&o&&t(this.dropdown);return!1},c.prototype._findNext=function(e){for(e=e?e.nextElementSibling:this.dropdown.querySelector(".list .option");e;){if(!r(e,"disabled")&&"none"!=e.style.display)return e;e=e.nextElementSibling}return null},c.prototype._findPrev=function(e){for(e=e?e.previousElementSibling:this.dropdown.querySelector(".list .option:last-child");e;){if(!r(e,"disabled")&&"none"!=e.style.display)return e;e=e.previousElementSibling}return null},c.prototype._onSearchChanged=function(e){var t=this.dropdown.classList.contains("open"),i=e.target.value;if(""==(i=i.toLowerCase()))this.options.forEach((function(e){e.element.style.display=""}));else if(t){var o=new RegExp(i);this.options.forEach((function(e){var t=e.data.text.toLowerCase(),i=o.test(t);e.element.style.display=i?"":"none"}))}this.dropdown.querySelectorAll(".focus").forEach((function(e){l(e,"focus")})),d(this._findNext(null),"focus")}})(),n})()}));